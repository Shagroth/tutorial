+++
date =  "2018-11-04T22:28:55+10:00
next = "/intro/6"
prev = "/intro/4"
title = "Mutation Introduction"
title = "Введение мутации"
weight = 5
+++

В последнем упражнении Вы добавили данные в Dgraph, такие изменения (добавление или удаление данных) в Dgraph называются мутацией. У нас есть два типа стандартных форматов мутаций: RDF (Resource Description Framework) N-Quad и JSON (JavaScript Object Notation). RDF — это широко используемый стандарт в системах Graph или Ontology.

В Dgraph операции мутации состоят из двух шаблонов: пустой ссылки на UID (идентификатор) или явной ссылки на UID.

Это введение играет ключевую роль для выполнения последующих упражнений, множество концепций, представленных здесь, будут повторяться и в следующих главах. (Например, “Добавление данных — мутация данных” и “Упражнение: интеграция существующих данных”)

# Пустой UID

При мутации любое определение, которое не соответствует формату явной ссылки UID, может считаться пустой ссылкой UID, также известной как пустой узел.
Структура пустого узла состоит из:

подчеркивание + двоеточие + уникальное имя (идентификатор)

В предыдущем разделе вы рассматривали пустые узлы _:michael и _:amit. Это правильный синтаксис пустого узла. Однако, будут случаи, когда анализатор примет некоторую опечатку за пустой узел. В таком случае использовать его не рекомендуется.
Например:

<_:uid43> or <_:uid4e030f>
\<someTypoMistake>

```
При экспорте данных Dgraph используются пустые узлы первой представленной формы.
```

В JSON формат пустого узла аналогичен. Пустой узел определяется ключом «uid» объекта JSON:

{
  "uid": "_:diggy",
  "name": "diggy",
  "dgraph.type": "Food",
  "food": "pizza"
}

Более подробно пустые узлы описаны в документах о мутации.

{{% notice "note" %}} В Bulk loader Dgraph любая опечатка считается пустой ссылкой UID. Так как Bulk loader — это инструмент для заполнения данных с нуля, он отличается от Live Loader. {{% /notice %}}

# Явный UID

Чтобы сделать мутацию для существующего узла, вы можете обратиться к UID узла непосредственно в процессе мутации.
Синтаксис прост:

\<THE-UID> # or 
<0x4e030f> \<somePredicate> "some new data" .

В JSON:

{
  "uid": "0x4e030f",
  "somePredicate": "some new data"
}

Один из способов узнать UID существующего узла — просто запросить предикат индексируемого узла, например:

{
  MyUser(func: eq(name, "Jack Torrance")) {
    uid
  }
}

{{% notice "note" %}} Ссылайтесь только на существующие UID. Если Вы пишете мутацию с нераспределённым UID, Dgraph вернёт ошибку. Для новых узлов используйте пустые узлы для Dgraph, чтобы назначить новый UID. {{% /notice %}}
